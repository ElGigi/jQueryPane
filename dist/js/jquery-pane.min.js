!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e=e||self).Pane=t(e.jQuery)}(this,function(e){"use strict";function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function S(i){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?t(Object(a),!0).forEach(function(e){var t,n,r;t=i,r=a[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}return function(s){if(void 0===s)throw new TypeError("jQuery Pane requires jQuery. jQuery must be included before.");var n={debug:!1,container:"body",loader:"",transitionInTime:50,transitionOutTime:400,ajax:{}},r="show.pane",a="shown.pane",o="hide.pane",u="hidden.pane",l="reload.content.pane",e="loading.content.pane",c="loaded.content.pane",f="error.content.pane",p="printed.content.pane",t="click.dismiss.pane",g="click.pane",d="submit.pane",i=".pane-wrapper:first",h=".pane-loader",m=".pane",v=".pane:not(.pane-static)",_="form:not([target])",y="form:not([target]) :submit[name]",b='[data-toggle="pane"]',w='[data-dismiss="pane"]',j=function(){function t(e){k(this,t),this._config=this._getConfig(e),this._wrapper=null,this._events(),this.config("debug")&&console.debug("PaneManager initialized")}return P(t,[{key:"refresh",value:function(){this._wrapper.toggleClass("is-open",0<s(v,this._wrapper).length)}},{key:"config",value:function(e){if(!O(this._config[e]))throw new TypeError('Undefined option name "'+e+'"');return this._config[e]}},{key:"new",value:function(){return new T(this)}},{key:"_events",value:function(){var t=this;s(document).off(g,b).on(g,b,function(e){e.preventDefault(),e.stopPropagation(),t.config("debug")&&console.debug("Selector",b,"has been clicked"),t._pane(this)})}},{key:"_pane",value:function(e){var t=null,n=s(e).data("href")||s(e).attr("href"),r=s(e).data("paneTarget")||"";if(n)return"self"===r&&(t=s(e).parents(m).data("pane")),(t=t||this.new()).relatedTarget=e,t.open(),t.load(n,s(e).data("paneLoadOptions")),t;console.error("Pane has no href to load content")}},{key:"_getConfig",value:function(e){return e=S(S({},n),e)}},{key:"wrapper",get:function(){var e,t;return this._wrapper||(this._wrapper=s(i),0===this._wrapper.length&&(this._wrapper=s('<div class="pane-wrapper"></div>'),s(this._config.container).append(this._wrapper)),this._wrapper.toggleClass("pane-ie",(e=window.navigator.userAgent,0<(0<(t=e.indexOf("MSIE"))?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/Trident\/7\./)?11:0)))),this._wrapper}}]),t}(),T=function(){function i(e){k(this,i),this._manager=e,this._jqXHR=null,this._isTransitioning=!1,this._isStatic=!1,this._relatedTarget=null,this._href=null,this._loadOptions={}}return P(i,[{key:"open",value:function(){var e,t;this._isStatic||this._isTransitioning||((e=this)._isTransitioning=!0,this._manager.wrapper.prepend(this.element),t=s.Event(r,{pane:e}),e.element.trigger(t),e._manager.config("debug")&&console.debug("Triggered event:",r),t.isDefaultPrevented()||(this._manager.refresh(),setTimeout(function(){e.element.addClass("is-visible"),e._isTransitioning=!1,e.element.trigger(a),e._manager.config("debug")&&console.debug("Triggered event:",a)},50)))}},{key:"reload",value:function(e){var t=s.Event(l,{pane:this,url:this._href});this.element.trigger(t),this._manager.config("debug")&&console.debug("Triggered event:",l),t.isDefaultPrevented()||this.load(this._href,null,e)}},{key:"load",value:function(e,t,n){if("string"!=typeof e)throw new TypeError("Pane::load() method need href in first argument");this._href=e.toString(),"object"===O(t)&&(this._loadOptions=t),this._ajax(S({url:this._href},this._loadOptions),n)}},{key:"close",value:function(){var e,t,n;this._isStatic||this._isTransitioning||(t=(e=this)._manager,n=s.Event(o,{pane:e.element}),e.element.trigger(n),e._manager.config("debug")&&console.debug("Triggered event:",o),n.isDefaultPrevented()||(this._isTransitioning=!0,e.element.removeClass("is-visible"),setTimeout(function(){e.element.trigger(u),e._manager.config("debug")&&console.debug("Triggered event:",u),e._isTransitioning=!1,e.element.remove(),t.refresh()},400)))}},{key:"loader",value:function(e){var t;(e="boolean"!=typeof e||e)?0===(t=s(h,this.element)).length&&((t=s('<div class="pane-loader"></div>')).append(this._manager.config("loader")),s(this.element).prepend(t)):s(h,this.element).remove()}},{key:"_events",value:function(){var o=this;this.element.off(t,w).on(t,w,function(e){e.preventDefault(),o.close()}).off(g,y).on(g,y,function(){s(this).parents("form").data("submitButton",{name:s(this).attr("name"),value:s(this).val(),novalidate:void 0!==s(this).attr("formnovalidate")})}).off(d,_).on(d,_,function(e){e.preventDefault();var t,n,r,i=s(this),a=null;s.isPlainObject(i.data("submitButton"))&&(a=i.data("submitButton")),(a&&a.novalidate||"function"!=typeof i.get(0).checkValidity||i.get(0).checkValidity())&&(t=-1!==s.inArray((s(this).attr("method")||"get").toLowerCase(),["post","put","connect","patch"]),n=o._serializeForm(i),a&&n.append(a.name,a.value),t||(r=[],n.forEach(function(e,t){r.push({name:t,value:e})}),n=r),o._ajax({url:s(this).attr("action")||o._href,method:s(this).attr("method")||"get",processData:!t,contentType:!t&&"text/plain",data:n,dataType:"json"}),i.removeData("submitButton"))})}},{key:"_serializeForm",value:function(e){var r=new FormData,t=e.serializeArray();return s.each(e.find('input[type="file"]'),function(e,n){s.each(s(n)[0].files,function(e,t){r.append(n.name,t)})}),s.each(t,function(e,t){r.append(t.name,t.value)}),r}},{key:"_ajax",value:function(i,a){var o;this._jqXHR||((o=this).element.trigger(e),o._manager.config("debug")&&console.debug("Triggered event:",e),o.loader(!0),i=S(S(S({method:"get"},this._manager.config("ajax")),i),{},{success:function(e,t,n){o._jqXHR=null,o.loader(!1);var r=s.Event(c,{pane:o,url:i.url,paneAjax:{data:e,textStatus:t,jqXHR:n,fragments:a||null}});o.element.trigger(r),o._manager.config("debug")&&console.debug("Triggered event:",c),r.isDefaultPrevented()||(a?s(a,o.element).first().html(s(n.responseText).find(a).html()):o.element.html(n.responseText),o.element.trigger(p,o.element),o._manager.config("debug")&&console.debug("Triggered event:",p))},error:function(e,t,n){o._jqXHR=null,o.loader(!1);var r=s.Event(f,{pane:o,paneAjax:{textStatus:t,jqXHR:e,errorThrown:n}});o.element.trigger(r),o._manager.config("debug")&&console.debug("Triggered event:",f),r.isDefaultPrevented()||o.close()}}),this._jqXHR=s.ajax(i))}},{key:"relatedTarget",get:function(){return this._relatedTarget},set:function(e){this._relatedTarget=e}},{key:"element",get:function(){return this._element||(this._element=s('<div role="complementary" class="pane"></div>'),this._element.data("pane",this),this._events()),this._element},set:function(e){this._element=e,this._isStatic=!0,this._element.data("pane",this),this._events()}},{key:"static",get:function(){return this._isStatic},set:function(e){this._isStatic=!0===e}},{key:"location",get:function(){return new URL(this._href,document.location.toString())},set:function(e){this._href=e.toString()}}],[{key:"_jQueryInterface",value:function(t,n,r){return this.each(function(){if(!("object"===O(s(this).data("pane"))&&s(this).data("pane")instanceof i))throw new Error("Not a pane");if("string"==typeof t){var e=s(this).data("pane");switch(t){case"close":case"load":case"reload":case"loader":e[t](n,r);break;default:throw new TypeError('No method named "'.concat(t,'"'))}}})}}]),i}();return s.fn.pane=T._jQueryInterface,s.fn.pane.noConflict=function(){return T._jQueryInterface},function(e){return new j(e)}}(e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e)});