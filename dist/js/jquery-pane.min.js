!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):e.Pane=n(e.jQuery)}(this,function(e){"use strict";function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}function P(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(e){var n,t,i;n=r,i=a[t=e],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i})}return r}return function(o){if(void 0===o)throw new TypeError("jQuery Pane requires jQuery. jQuery must be included before.");var t={debug:!1,container:"body",transitionInTime:50,transitionOutTime:400},i="loading.content.pane",a="loaded.content.pane",s="error.content.pane",l="printed.content.pane",u="submit.content.pane",p="submitted.content.pane",r="show.pane",f="shown.pane",c="hide.pane",h="hidden.pane",e=".pane-wrapper:first",g=".pane-loader",d=".pane",m="form:not([target])",_="form:not([target]) :submit[name]",y='[data-toggle="pane"]',v='[data-dismiss="pane"]',n=function(){function n(e){j(this,n),this._config=this._getConfig(e),this._wrapper=null,this._events(),this.config("debug")&&console.debug("PaneManager initialized")}return k(n,[{key:"refresh",value:function(){this._wrapper.toggleClass("is-open",0<o(d,this._wrapper).length)}},{key:"config",value:function(e){if(!w(this._config[e]))throw new TypeError('Undefined option name "'+e+'"');return this._config[e]}},{key:"_events",value:function(){var n=this;o(document).off("click.pane",y).on("click.pane",y,function(e){e.preventDefault(),n.config("debug")&&console.debug("Selector",y,"has been clicked"),n._newPane(this)})}},{key:"_newPane",value:function(e){var n=o(e).data("href")||o(e).attr("href");if(n){var t=new b(this);return t.open(o(e).attr("paneClass")||""),t.load(n),t}console.error("Pane has no href to load content")}},{key:"_getConfig",value:function(e){return e=P({},t,e)}},{key:"wrapper",get:function(){return this._wrapper||(this._wrapper=o(e),0===this._wrapper.length&&(this._wrapper=o('<div class="pane-wrapper"></div>'),o(this._config.container).append(this._wrapper))),this._wrapper}}]),n}(),b=function(){function n(e){j(this,n),this._manager=e,this._jqXHR=null,this._isTransitioning=!1,this._element=null,this._href=null,this._element=o('<div role="complementary" class="pane"></div>'),this._element.data("pane",this),this._events()}return k(n,[{key:"open",value:function(e){if(!this._isTransitioning){this._manager.config("debug")&&console.debug("Pane opened");var n=this;"string"==typeof e&&n._element.addClass(e),this._isTransitioning=!0,this._manager.wrapper.prepend(this._element),this._manager.refresh(),n._element.trigger(r),setTimeout(function(){n._element.addClass("is-visible"),n._element.trigger(f),n._isTransitioning=!1},50)}}},{key:"load",value:function(e){if(this._manager.config("debug")&&console.debug("Pane loaded"),"string"!=typeof e)throw new TypeError("Pane::load() method need href in first argument");this._ajax({url:e}),this._href=e}},{key:"close",value:function(){if(!this._isTransitioning){var e=this,n=this._manager,t=o.Event(c,{pane:e._element});e._element.trigger(t),t.isPropagationStopped()||(this._isTransitioning=!0,e._element.removeClass("is-visible"),setTimeout(function(){e._element.remove(),n.refresh(),e._element.trigger(h),e._isTransitioning=!1},400))}}},{key:"_events",value:function(){var a=this;this._element.off("click.pane",v).on("click.pane",v,function(e){e.preventDefault(),a.close(e)}).off("click.pane",_).on("click.pane",_,function(e){e.preventDefault(),o(this).parents("form").trigger("submit",{name:o(this).attr("name"),value:o(this).val()})}).off("submit.pane",m).on("submit.pane",m,function(e,n){e.preventDefault();var t=o(this),i=o.Event(u);if(t.trigger(i),!i.isPropagationStopped()&&("function"!=typeof t.get(0).checkValidity||t.get(0).checkValidity())){var r=t.serializeArray();o.isPlainObject(n)&&r.push(n),a._ajax({url:o(this).attr("action")||a._href,method:o(this).attr("method")||"get",data:r,dataType:"json"}),t.trigger(p)}return!1})}},{key:"_loader",value:function(e){if(e="boolean"!=typeof e||e){var n=o(g,this._element);0===n.length&&((n=o('<div class="pane-loader"></div>')).append(this._manager.config("loader_content")),o(this._element).prepend(n))}else o(g,this._element).remove()}},{key:"_ajax",value:function(e){if(!this._jqXHR){var r=this;r._element.trigger(i),r._loader(!0),e=P({method:"get"},e,{success:function(e,n,t){var i=o.Event(a,{pane:r._element,paneAjax:{data:e,textStatus:n,jqXHR:t}});r._element.trigger(i),i.isPropagationStopped()||(r._element.html(t.responseText),r._element.trigger(l,r._element))},error:function(e,n,t){var i=o.Event(s,{pane:r._element,paneAjax:{textStatus:n,jqXHR:e,errorThrown:t}});r._element.trigger(i),i.isPropagationStopped()||r.close()},complete:function(){r._jqXHR=null,r._loader(!1)}}),this._jqXHR=o.ajax(e)}}}]),n}();return function(e){return new n(e)}}(e=e&&e.hasOwnProperty("default")?e.default:e)});