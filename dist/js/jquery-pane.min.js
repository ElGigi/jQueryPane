!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],n):(e=e||self).Pane=n(e.jQuery)}(this,function(e){"use strict";function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function S(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}function O(a){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){var n,t,i;n=a,i=r[t=e],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i})}return a}return function(o){if(void 0===o)throw new TypeError("jQuery Pane requires jQuery. jQuery must be included before.");var t={debug:!1,container:"body",loader:"",transitionInTime:50,transitionOutTime:400,ajax:{}},i="show.pane",r="shown.pane",s="hide.pane",l="hidden.pane",n="loading.content.pane",u="loaded.content.pane",f="error.content.pane",c="printed.content.pane",e="click.dismiss.pane",p="click.pane",d="submit.pane",a=".pane-wrapper:first",g=".pane-loader",h=".pane",m=".pane:not(.pane-static)",_="form:not([target])",v="form:not([target]) :submit[name]",y='[data-toggle="pane"]',b='[data-dismiss="pane"]',w=function(){function n(e){k(this,n),this._config=this._getConfig(e),this._wrapper=null,this._events(),this.config("debug")&&console.debug("PaneManager initialized")}return S(n,[{key:"refresh",value:function(){this._wrapper.toggleClass("is-open",0<o(m,this._wrapper).length)}},{key:"config",value:function(e){if(!T(this._config[e]))throw new TypeError('Undefined option name "'+e+'"');return this._config[e]}},{key:"new",value:function(e){var n=new j(this);return n.open(e||""),n}},{key:"newStatic",value:function(e,n){return new j(this,e,n)}},{key:"_events",value:function(){var n=this;o(document).off(p,y).on(p,y,function(e){e.preventDefault(),n.config("debug")&&console.debug("Selector",y,"has been clicked"),n._pane(this)})}},{key:"_pane",value:function(e){var n=null,t=o(e).data("href")||o(e).attr("href"),i=o(e).data("paneTarget")||"";if(t)return"self"===i&&(n=o(e).parents(h).data("pane")),n||(n=this.new(o(e).data("paneClass")||"")),n.load(t,o(e).data("paneLoadOptions")),n;console.error("Pane has no href to load content")}},{key:"_getConfig",value:function(e){return e=O({},t,e)}},{key:"wrapper",get:function(){return this._wrapper||(this._wrapper=o(a),0===this._wrapper.length&&(this._wrapper=o('<div class="pane-wrapper"></div>'),o(this._config.container).append(this._wrapper)),!this._wrapper.hasClass("pane-ie")&&0<function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE");return 0<n?parseInt(e.substring(n+5,e.indexOf(".",n))):navigator.userAgent.match(/Trident\/7\./)?11:0}()&&this._wrapper.addClass("pane-ie")),this._wrapper}}]),n}(),j=function(){function a(e,n,t){k(this,a),this._manager=e,this._jqXHR=null,this._isTransitioning=!1,this._isStatic=!0,this._element=null,this._href=t||null,this._loadOptions={},this._element=n,this._element||(this._element=o('<div role="complementary" class="pane"></div>'),this._isStatic=!1),this._element.data("pane",this),this._events()}return S(a,[{key:"open",value:function(e){if(!this._isStatic&&!this._isTransitioning){var n=this;"string"==typeof e&&n._element.addClass(e),this._isTransitioning=!0,this._manager.wrapper.prepend(this._element),this._manager.refresh(),n._element.trigger(i),n._manager.config("debug")&&console.debug("Triggered event:",i),setTimeout(function(){n._element.addClass("is-visible"),n._element.trigger(r),n._manager.config("debug")&&console.debug("Triggered event:",r),n._isTransitioning=!1},50)}}},{key:"reload",value:function(e){this.load(this._href,null,e)}},{key:"load",value:function(e,n,t){if("string"!=typeof e)throw new TypeError("Pane::load() method need href in first argument");this._href=e,"object"===T(n)&&(this._loadOptions=n),this._ajax(O({url:this._href},this._loadOptions),t)}},{key:"close",value:function(){if(!this._isStatic&&!this._isTransitioning){var e=this,n=this._manager,t=o.Event(s,{pane:e._element});e._element.trigger(t),e._manager.config("debug")&&console.debug("Triggered event:",s),t.isPropagationStopped()||(this._isTransitioning=!0,e._element.removeClass("is-visible"),setTimeout(function(){e._element.remove(),n.refresh(),e._element.trigger(l),e._manager.config("debug")&&console.debug("Triggered event:",l),e._isTransitioning=!1},400))}}},{key:"_events",value:function(){var a=this;this._element.off(e,b).on(e,b,function(e){e.preventDefault(),a.close()}).off(p,v).on(p,v,function(){o(this).parents("form").data("submitButton",{name:o(this).attr("name"),value:o(this).val(),novalidate:void 0!==o(this).attr("formnovalidate")})}).off(d,_).on(d,_,function(e){e.preventDefault();var n=o(this),t=null;if(o.isPlainObject(n.data("submitButton"))&&(t=n.data("submitButton")),t&&t.novalidate||"function"!=typeof n.get(0).checkValidity||n.get(0).checkValidity()){var i=a._serializeForm(n);t&&i.append(t.name,t.value),a._ajax({url:o(this).attr("action")||a._href,method:o(this).attr("method")||"get",processData:!1,contentType:!1,data:i,dataType:"json"}),n.removeData("submitButton")}})}},{key:"_serializeForm",value:function(e){var i=new FormData,n=e.serializeArray();return o.each(e.find('input[type="file"]'),function(e,t){o.each(o(t)[0].files,function(e,n){i.append(t.name,n)})}),o.each(n,function(e,n){i.append(n.name,n.value)}),i}},{key:"_loader",value:function(e){if(e="boolean"!=typeof e||e){var n=o(g,this._element);0===n.length&&((n=o('<div class="pane-loader"></div>')).append(this._manager.config("loader")),o(this._element).prepend(n))}else o(g,this._element).remove()}},{key:"_ajax",value:function(e,a){if(!this._jqXHR){var r=this;r._element.trigger(n),r._manager.config("debug")&&console.debug("Triggered event:",n),r._loader(!0),e=O({method:"get"},this._manager.config("ajax"),e,{success:function(e,n,t){r._jqXHR=null,r._loader(!1);var i=o.Event(u,{pane:r._element,paneAjax:{data:e,textStatus:n,jqXHR:t,fragments:a||null}});r._element.trigger(i),r._manager.config("debug")&&console.debug("Triggered event:",u),i.isPropagationStopped()||(a?o(a,r._element).first().html(o(t.responseText).find(a).html()):r._element.html(t.responseText),r._element.trigger(c,r._element),r._manager.config("debug")&&console.debug("Triggered event:",c))},error:function(e,n,t){r._jqXHR=null,r._loader(!1);var i=o.Event(f,{pane:r._element,paneAjax:{textStatus:n,jqXHR:e,errorThrown:t}});r._element.trigger(i),r._manager.config("debug")&&console.debug("Triggered event:",f),i.isPropagationStopped()||r.close()}}),this._jqXHR=o.ajax(e)}}},{key:"location",get:function(){return new URL(this._href,document.location.toString())}}],[{key:"_jQueryInterface",value:function(n,t,i){return this.each(function(){if(!("object"===T(o(this).data("pane"))&&o(this).data("pane")instanceof a))throw new Error("Not a pane");if("string"==typeof n){var e=o(this).data("pane");switch(n){case"close":case"load":case"reload":e[n](t,i);break;default:throw new TypeError('No method named "'.concat(n,'"'))}}})}}]),a}();return o.fn.pane=j._jQueryInterface,o.fn.pane.noConflict=function(){return j._jQueryInterface},function(e){return new w(e)}}(e=e&&e.hasOwnProperty("default")?e.default:e)});