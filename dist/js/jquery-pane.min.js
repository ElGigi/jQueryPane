!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e=e||self).Pane=t(e.jQuery)}(this,function(e){"use strict";function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function O(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function t(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function S(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?t(a,!0).forEach(function(e){var t,n,i;t=r,i=a[n=e],n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(a).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}return function(o){if(void 0===o)throw new TypeError("jQuery Pane requires jQuery. jQuery must be included before.");var n={debug:!1,container:"body",loader:"",transitionInTime:50,transitionOutTime:400,ajax:{}},i="show.pane",a="shown.pane",s="hide.pane",u="hidden.pane",t="loading.content.pane",l="loaded.content.pane",c="error.content.pane",f="printed.content.pane",e="click.dismiss.pane",p="click.pane",g="submit.pane",r=".pane-wrapper:first",d=".pane-loader",h=".pane",m=".pane:not(.pane-static)",_="form:not([target])",v="form:not([target]) :submit[name]",y='[data-toggle="pane"]',b='[data-dismiss="pane"]',w=function(){function t(e){k(this,t),this._config=this._getConfig(e),this._wrapper=null,this._events(),this.config("debug")&&console.debug("PaneManager initialized")}return O(t,[{key:"refresh",value:function(){this._wrapper.toggleClass("is-open",0<o(m,this._wrapper).length)}},{key:"config",value:function(e){if(!T(this._config[e]))throw new TypeError('Undefined option name "'+e+'"');return this._config[e]}},{key:"new",value:function(){return new j(this)}},{key:"_events",value:function(){var t=this;o(document).off(p,y).on(p,y,function(e){e.preventDefault(),e.stopPropagation(),t.config("debug")&&console.debug("Selector",y,"has been clicked"),t._pane(this)})}},{key:"_pane",value:function(e){var t=null,n=o(e).data("href")||o(e).attr("href"),i=o(e).data("paneTarget")||"";if(n)return"self"===i&&(t=o(e).parents(h).data("pane")),(t=t||this.new()).relatedTarget=e,t.open(),t.load(n,o(e).data("paneLoadOptions")),t;console.error("Pane has no href to load content")}},{key:"_getConfig",value:function(e){return e=S({},n,{},e)}},{key:"wrapper",get:function(){return this._wrapper||(this._wrapper=o(r),0===this._wrapper.length&&(this._wrapper=o('<div class="pane-wrapper"></div>'),o(this._config.container).append(this._wrapper)),this._wrapper.toggleClass("pane-ie",0<function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE");return 0<t?parseInt(e.substring(t+5,e.indexOf(".",t))):navigator.userAgent.match(/Trident\/7\./)?11:0}())),this._wrapper}}]),t}(),j=function(){function r(e){k(this,r),this._manager=e,this._jqXHR=null,this._isTransitioning=!1,this._isStatic=!1,this._relatedTarget=null,this._href=null,this._loadOptions={}}return O(r,[{key:"open",value:function(){if(!this._isStatic&&!this._isTransitioning){var e=this;this._isTransitioning=!0,this._manager.wrapper.prepend(this.element);var t=o.Event(i,{pane:e});e.element.trigger(t),e._manager.config("debug")&&console.debug("Triggered event:",i),t.isPropagationStopped()||(this._manager.refresh(),setTimeout(function(){e.element.addClass("is-visible"),e._isTransitioning=!1,e.element.trigger(a),e._manager.config("debug")&&console.debug("Triggered event:",a)},50))}}},{key:"reload",value:function(e){this.load(this._href,null,e)}},{key:"load",value:function(e,t,n){if("string"!=typeof e)throw new TypeError("Pane::load() method need href in first argument");this._href=e.toString(),"object"===T(t)&&(this._loadOptions=t),this._ajax(S({url:this._href},this._loadOptions),n)}},{key:"close",value:function(){if(!this._isStatic&&!this._isTransitioning){var e=this,t=this._manager,n=o.Event(s,{pane:e.element});e.element.trigger(n),e._manager.config("debug")&&console.debug("Triggered event:",s),n.isPropagationStopped()||(this._isTransitioning=!0,e.element.removeClass("is-visible"),setTimeout(function(){e.element.trigger(u),e._manager.config("debug")&&console.debug("Triggered event:",u),e._isTransitioning=!1,e.element.remove(),t.refresh()},400))}}},{key:"_events",value:function(){var r=this;this.element.off(e,b).on(e,b,function(e){e.preventDefault(),r.close()}).off(p,v).on(p,v,function(){o(this).parents("form").data("submitButton",{name:o(this).attr("name"),value:o(this).val(),novalidate:void 0!==o(this).attr("formnovalidate")})}).off(g,_).on(g,_,function(e){e.preventDefault();var t=o(this),n=null;if(o.isPlainObject(t.data("submitButton"))&&(n=t.data("submitButton")),n&&n.novalidate||"function"!=typeof t.get(0).checkValidity||t.get(0).checkValidity()){var i=r._serializeForm(t);n&&i.append(n.name,n.value),r._ajax({url:o(this).attr("action")||r._href,method:o(this).attr("method")||"get",processData:!1,contentType:!1,data:i,dataType:"json"}),t.removeData("submitButton")}})}},{key:"_serializeForm",value:function(e){var i=new FormData,t=e.serializeArray();return o.each(e.find('input[type="file"]'),function(e,n){o.each(o(n)[0].files,function(e,t){i.append(n.name,t)})}),o.each(t,function(e,t){i.append(t.name,t.value)}),i}},{key:"_loader",value:function(e){if(e="boolean"!=typeof e||e){var t=o(d,this.element);0===t.length&&((t=o('<div class="pane-loader"></div>')).append(this._manager.config("loader")),o(this.element).prepend(t))}else o(d,this.element).remove()}},{key:"_ajax",value:function(e,r){if(!this._jqXHR){var a=this;a.element.trigger(t),a._manager.config("debug")&&console.debug("Triggered event:",t),a._loader(!0),e=S({method:"get"},this._manager.config("ajax"),{},e,{success:function(e,t,n){a._jqXHR=null,a._loader(!1);var i=o.Event(l,{pane:a,paneAjax:{data:e,textStatus:t,jqXHR:n,fragments:r||null}});a.element.trigger(i),a._manager.config("debug")&&console.debug("Triggered event:",l),i.isPropagationStopped()||(r?o(r,a.element).first().html(o(n.responseText).find(r).html()):a.element.html(n.responseText),a.element.trigger(f,a.element),a._manager.config("debug")&&console.debug("Triggered event:",f))},error:function(e,t,n){a._jqXHR=null,a._loader(!1);var i=o.Event(c,{pane:a,paneAjax:{textStatus:t,jqXHR:e,errorThrown:n}});a.element.trigger(i),a._manager.config("debug")&&console.debug("Triggered event:",c),i.isPropagationStopped()||a.close()}}),this._jqXHR=o.ajax(e)}}},{key:"relatedTarget",get:function(){return this._relatedTarget},set:function(e){this._relatedTarget=e}},{key:"element",get:function(){return this._element||(this._element=o('<div role="complementary" class="pane"></div>'),this._element.data("pane",this),this._events()),this._element},set:function(e){this._element=e,this._isStatic=!0,this._element.data("pane",this),this._events()}},{key:"static",get:function(){return this._isStatic},set:function(e){this._isStatic=!0===e}},{key:"location",get:function(){return new URL(this._href,document.location.toString())},set:function(e){this._href=e.toString()}}],[{key:"_jQueryInterface",value:function(t,n,i){return this.each(function(){if(!("object"===T(o(this).data("pane"))&&o(this).data("pane")instanceof r))throw new Error("Not a pane");if("string"==typeof t){var e=o(this).data("pane");switch(t){case"close":case"load":case"reload":e[t](n,i);break;default:throw new TypeError('No method named "'.concat(t,'"'))}}})}}]),r}();return o.fn.pane=j._jQueryInterface,o.fn.pane.noConflict=function(){return j._jQueryInterface},function(e){return new w(e)}}(e=e&&e.hasOwnProperty("default")?e.default:e)});