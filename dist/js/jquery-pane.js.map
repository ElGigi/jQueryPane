{"version":3,"file":"jquery-pane.js","sources":["../../src/js/Pane.js"],"sourcesContent":["/*\r\n * This file is part of jQuery Pane.\r\n *\r\n * @license   https://opensource.org/licenses/MIT MIT License\r\n * @copyright 2018\r\n * @author Cassie ROUSSEAU <https://github.com/K6-front>\r\n * @author Ronan GIRON <https://github.com/ElGigi>\r\n * @author Yohann LORANT <https://github.com/ylorant>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code, to the root.\r\n */\r\n\r\nimport $ from 'jquery';\r\n\r\nconst PaneManager = (($) => {\r\n    // Check jQuery requirements\r\n    if (typeof $ === 'undefined') {\r\n        throw new TypeError('jQuery Pane requires jQuery. jQuery must be included before.');\r\n    }\r\n\r\n    /**\r\n     * Get Internet Explorer version.\r\n     *\r\n     * @return {number}\r\n     */\r\n    function GetIEVersion() {\r\n        let sAgent = window.navigator.userAgent;\r\n        let Idx = sAgent.indexOf(\"MSIE\");\r\n\r\n        // If IE, return version number.\r\n        if (Idx > 0) {\r\n            return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)))\r\n        }\r\n        // If IE 11 then look for Updated user agent string.\r\n        else if (!!navigator.userAgent.match(/Trident\\/7\\./)) {\r\n            return 11\r\n        } else {\r\n            return 0 //It is not IE\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Defaults\r\n     */\r\n\r\n    const Default = {\r\n        debug: false,\r\n        container: 'body',\r\n        loader: '',\r\n        transitionInTime: 50,\r\n        transitionOutTime: 400,\r\n        ajax: {},\r\n    };\r\n\r\n    /**\r\n     * Events\r\n     */\r\n\r\n    const Event = {\r\n        // Pane\r\n        SHOW: 'show.pane',\r\n        SHOWN: 'shown.pane',\r\n        HIDE: 'hide.pane',\r\n        HIDDEN: 'hidden.pane',\r\n        // Pane content\r\n        RELOAD: 'reload.content.pane',\r\n        LOADING: 'loading.content.pane',\r\n        LOADED: 'loaded.content.pane',\r\n        LOADING_ERROR: 'error.content.pane',\r\n        PRINTED: 'printed.content.pane',\r\n        SUBMIT: 'submit.content.pane',\r\n        // Selectors\r\n        CLICK_DISMISS: 'click.dismiss.pane',\r\n        CLICK_DATA_API: 'click.pane',\r\n        SUBMIT_DATA_API: 'submit.pane',\r\n    };\r\n\r\n    /**\r\n     * SELECTORS\r\n     */\r\n\r\n    const Selector = {\r\n        WRAPPER: '.pane-wrapper:first',\r\n        LOADER: '.pane-loader',\r\n        PANE: '.pane',\r\n        PANE_NOT_STATIC: '.pane:not(.pane-static)',\r\n        FORM: 'form:not([target])',\r\n        SUBMIT: 'form:not([target]) :submit[name]',\r\n        DATA_TOGGLE: '[data-toggle=\"pane\"]',\r\n        DATA_DISMISS: '[data-dismiss=\"pane\"]',\r\n    };\r\n\r\n    /**\r\n     * PaneManager\r\n     */\r\n    class PaneManager {\r\n        constructor(config) {\r\n            this._config = this._getConfig(config);\r\n            this._wrapper = null;\r\n            this._events();\r\n\r\n            // Debug\r\n            if (this.config('debug')) {\r\n                console.debug('PaneManager initialized')\r\n            }\r\n        }\r\n\r\n        // Getters\r\n\r\n        get wrapper() {\r\n            if (!this._wrapper) {\r\n                this._wrapper = $(Selector.WRAPPER);\r\n\r\n                if (this._wrapper.length === 0) {\r\n                    this._wrapper = $('<div class=\"pane-wrapper\"></div>');\r\n                    $(this._config.container).append(this._wrapper)\r\n                }\r\n\r\n                // Internet explorer\r\n                this._wrapper.toggleClass('pane-ie', GetIEVersion() > 0)\r\n            }\r\n\r\n            return this._wrapper\r\n        }\r\n\r\n        // Public\r\n\r\n        refresh() {\r\n            this._wrapper.toggleClass('is-open', $(Selector.PANE_NOT_STATIC, this._wrapper).length > 0)\r\n        }\r\n\r\n        config(key) {\r\n            if (!typeof this._config[key]) {\r\n                throw new TypeError('Undefined option name \"' + key + '\"')\r\n            }\r\n\r\n            return this._config[key]\r\n        }\r\n\r\n        new() {\r\n            return new Pane(this)\r\n        }\r\n\r\n        // Private\r\n\r\n        _events() {\r\n            let manager = this;\r\n\r\n            $(document)\r\n                .off(Event.CLICK_DATA_API, Selector.DATA_TOGGLE)\r\n                .on(Event.CLICK_DATA_API,\r\n                    Selector.DATA_TOGGLE,\r\n                    function (event) {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n\r\n                        // Debug\r\n                        if (manager.config('debug')) {\r\n                            console.debug('Selector', Selector.DATA_TOGGLE, 'has been clicked')\r\n                        }\r\n\r\n                        manager._pane(this)\r\n                    })\r\n        }\r\n\r\n        _pane(relatedTarget) {\r\n            let pane = null,\r\n                href = $(relatedTarget).data('href') || $(relatedTarget).attr('href'),\r\n                target = $(relatedTarget).data('paneTarget') || '';\r\n\r\n            if (!href) {\r\n                console.error('Pane has no href to load content');\r\n                return\r\n            }\r\n\r\n            // Target self?\r\n            if (target === 'self') {\r\n                pane = $(relatedTarget).parents(Selector.PANE).data('pane')\r\n            }\r\n\r\n            // Need to create pane?\r\n            if (!pane) {\r\n                pane = this.new()\r\n            }\r\n            pane.relatedTarget = relatedTarget;\r\n            pane.open();\r\n            pane.load(href, $(relatedTarget).data('paneLoadOptions'));\r\n\r\n            return pane\r\n        }\r\n\r\n        _getConfig(config) {\r\n            config = {\r\n                ...Default,\r\n                ...config\r\n            };\r\n\r\n            return config\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Pane\r\n     */\r\n    class Pane {\r\n        constructor(paneManager) {\r\n            this._manager = paneManager;\r\n            this._jqXHR = null;\r\n            this._isTransitioning = false;\r\n            this._isStatic = false;\r\n            this._relatedTarget = null;\r\n            this._href = null;\r\n            this._loadOptions = {};\r\n        }\r\n\r\n        // Getters\r\n\r\n        get relatedTarget() {\r\n            return this._relatedTarget\r\n        }\r\n\r\n        get element() {\r\n            if (!this._element) {\r\n                // Default element\r\n                this._element = $('<div role=\"complementary\" class=\"pane\"></div>');\r\n                this._element.data('pane', this);\r\n                this._events()\r\n            }\r\n\r\n            return this._element\r\n        }\r\n\r\n        get static() {\r\n            return this._isStatic\r\n        }\r\n\r\n        get location() {\r\n            return new URL(this._href, document.location.toString())\r\n        }\r\n\r\n        // Setters\r\n\r\n        set relatedTarget(relatedTarget) {\r\n            this._relatedTarget = relatedTarget\r\n        }\r\n\r\n        set element(element) {\r\n            this._element = element;\r\n            this._isStatic = true;\r\n            this._element.data('pane', this);\r\n            this._events()\r\n        }\r\n\r\n        set static(isStatic) {\r\n            this._isStatic = isStatic === true\r\n        }\r\n\r\n        set location(location) {\r\n            this._href = location.toString()\r\n        }\r\n\r\n        // Public\r\n\r\n        open() {\r\n            if (this._isStatic) {\r\n                return\r\n            }\r\n\r\n            if (this._isTransitioning) {\r\n                return\r\n            }\r\n\r\n            // Already opened?\r\n            if (this._manager.wrapper.find(this.element).length > 0) {\r\n                return\r\n            }\r\n\r\n            let pane = this;\r\n            this._isTransitioning = true;\r\n            this._manager.wrapper.prepend(this.element);\r\n\r\n            // Event trigger\r\n            let eventShow = $.Event(Event.SHOW, {pane: pane});\r\n            pane.element.trigger(eventShow);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.SHOW);\r\n            }\r\n\r\n            if (!eventShow.isDefaultPrevented()) {\r\n                this._manager.refresh();\r\n\r\n                // Animation\r\n                setTimeout(\r\n                    function () {\r\n                        pane.element.addClass('is-visible');\r\n\r\n                        pane._isTransitioning = false;\r\n\r\n                        // Event trigger\r\n                        pane.element.trigger(Event.SHOWN);\r\n                        if (pane._manager.config('debug')) {\r\n                            console.debug('Triggered event:', Event.SHOWN)\r\n                        }\r\n                    },\r\n                    50\r\n                )\r\n            }\r\n        }\r\n\r\n        reload(fragments) {\r\n            let pane = this;\r\n\r\n            // Event trigger\r\n            let eventReload = $.Event(Event.RELOAD, {pane: pane, url: this._href});\r\n            pane.element.trigger(eventReload);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.RELOAD);\r\n            }\r\n\r\n            if (!eventReload.isDefaultPrevented()) {\r\n                this.load(this._href, null, fragments)\r\n            }\r\n        }\r\n\r\n        load(href, loadOptions, fragments) {\r\n            if (typeof href !== 'string') {\r\n                throw new TypeError('Pane::load() method need href in first argument')\r\n            }\r\n\r\n            // Set to private properties\r\n            this._href = href.toString();\r\n            if (typeof loadOptions === 'object') {\r\n                this._loadOptions = loadOptions\r\n            }\r\n\r\n            // Load content with AJAX\r\n            this._ajax(\r\n                {\r\n                    url: this._href,\r\n                    ...this._loadOptions,\r\n                },\r\n                fragments\r\n            )\r\n        }\r\n\r\n        close() {\r\n            if (this._isStatic) {\r\n                return\r\n            }\r\n\r\n            if (this._isTransitioning) {\r\n                return\r\n            }\r\n\r\n            let pane = this,\r\n                manager = this._manager;\r\n\r\n            // Event trigger\r\n            let eventClose = $.Event(Event.HIDE, {pane: pane.element});\r\n            pane.element.trigger(eventClose);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.HIDE)\r\n            }\r\n\r\n            if (!eventClose.isDefaultPrevented()) {\r\n                // Animation\r\n                this._isTransitioning = true;\r\n                pane.element.removeClass('is-visible');\r\n\r\n                // After animation\r\n                setTimeout(\r\n                    function () {\r\n                        // Event trigger\r\n                        pane.element.trigger(Event.HIDDEN);\r\n                        if (pane._manager.config('debug')) {\r\n                            console.debug('Triggered event:', Event.HIDDEN)\r\n                        }\r\n\r\n                        pane._isTransitioning = false;\r\n                        pane.element.remove();\r\n                        manager.refresh()\r\n                    },\r\n                    400\r\n                )\r\n            }\r\n        }\r\n\r\n        loader(toggle) {\r\n            toggle = typeof toggle === 'boolean' ? toggle : true;\r\n\r\n            if (toggle) {\r\n                let $loader = $(Selector.LOADER, this.element);\r\n\r\n                if ($loader.length === 0) {\r\n                    $loader = $('<div class=\"pane-loader\"></div>');\r\n                    $loader.append(this._manager.config('loader'));\r\n                    $(this.element).prepend($loader)\r\n                }\r\n            } else {\r\n                $(Selector.LOADER, this.element).remove()\r\n            }\r\n        }\r\n\r\n        // Private\r\n\r\n        _events() {\r\n            let pane = this;\r\n\r\n            this.element\r\n                // Dismiss\r\n                .off(Event.CLICK_DISMISS, Selector.DATA_DISMISS)\r\n                .on(Event.CLICK_DISMISS,\r\n                    Selector.DATA_DISMISS,\r\n                    function (event) {\r\n                        event.preventDefault();\r\n\r\n                        pane.close()\r\n                    })\r\n                // Submit buttons\r\n                .off(Event.CLICK_DATA_API, Selector.SUBMIT)\r\n                .on(Event.CLICK_DATA_API,\r\n                    Selector.SUBMIT,\r\n                    function () {\r\n                        let $form = $(this).parents('form');\r\n\r\n                        $form.data('submitButton',\r\n                            {\r\n                                'name': $(this).attr('name'),\r\n                                'value': $(this).val(),\r\n                                'novalidate': ($(this).attr('formnovalidate') !== undefined)\r\n                            })\r\n                    })\r\n                // Submit form\r\n                .off(Event.SUBMIT_DATA_API, Selector.FORM)\r\n                .on(Event.SUBMIT_DATA_API,\r\n                    Selector.FORM,\r\n                    function (event) {\r\n                        event.preventDefault();\r\n\r\n                        let $form = $(this);\r\n\r\n                        // Submit button\r\n                        let submitButton = null;\r\n                        if ($.isPlainObject($form.data('submitButton'))) {\r\n                            submitButton = $form.data('submitButton')\r\n                        }\r\n\r\n                        if ((submitButton && submitButton.novalidate) ||\r\n                            typeof $form.get(0).checkValidity !== 'function' ||\r\n                            $form.get(0).checkValidity()) {\r\n                            // Get data of form\r\n                            let bodyHttpRequest = $.inArray(($(this).attr('method') || 'get').toLowerCase(), ['post', 'put', 'connect', 'patch']) !== -1;\r\n                            let formData = pane._serializeForm($form);\r\n\r\n                            // Add button to form data\r\n                            if (submitButton) {\r\n                                formData.append(submitButton.name, submitButton.value)\r\n                            }\r\n\r\n                            // Convert to JSON if no body request\r\n                            if (!bodyHttpRequest) {\r\n                                let formDataTmp = [];\r\n                                formData.forEach((value, name) => {\r\n                                    formDataTmp.push({name: name, value: value})\r\n                                });\r\n                                formData = formDataTmp\r\n                            }\r\n\r\n                            // Form submission\r\n                            pane._ajax({\r\n                                url: $(this).attr('action') || pane._href,\r\n                                method: $(this).attr('method') || 'get',\r\n                                processData: !bodyHttpRequest,\r\n                                contentType: bodyHttpRequest ? false : 'text/plain',\r\n                                data: formData,\r\n                                dataType: 'json'\r\n                            });\r\n\r\n                            // Remove submit button reference\r\n                            $form.removeData('submitButton')\r\n                        }\r\n                    })\r\n        }\r\n\r\n        _serializeForm(form) {\r\n            let\r\n                formData = new FormData(),\r\n                formParams = form.serializeArray();\r\n\r\n            $.each(form.find('input[type=\"file\"]'), function (i, tag) {\r\n                $.each($(tag)[0].files, function (i, file) {\r\n                    formData.append(tag.name, file)\r\n                })\r\n            });\r\n\r\n            $.each(formParams, function (i, val) {\r\n                formData.append(val.name, val.value)\r\n            });\r\n\r\n            return formData\r\n        }\r\n\r\n        _ajax(options, fragments) {\r\n            if (this._jqXHR) {\r\n                return\r\n            }\r\n\r\n            let pane = this;\r\n\r\n            // Ajax options\r\n            options = {\r\n                method: 'get',\r\n                ...this._manager.config('ajax'),\r\n                ...options,\r\n                success: function (data, textStatus, jqXHR) {\r\n                    pane._jqXHR = null;\r\n                    pane.loader(false);\r\n\r\n                    let eventLoaded = $.Event(Event.LOADED,\r\n                        {\r\n                            pane: pane,\r\n                            url: options.url,\r\n                            paneAjax: {\r\n                                data: data,\r\n                                textStatus: textStatus,\r\n                                jqXHR: jqXHR,\r\n                                fragments: fragments || null,\r\n                            }\r\n                        });\r\n\r\n                    // Event trigger\r\n                    pane.element.trigger(eventLoaded);\r\n                    if (pane._manager.config('debug')) {\r\n                        console.debug('Triggered event:', Event.LOADED)\r\n                    }\r\n\r\n                    if (!eventLoaded.isDefaultPrevented()) {\r\n                        if (fragments) {\r\n                            $(fragments, pane.element).first().html($(jqXHR.responseText).find(fragments).html())\r\n                        } else {\r\n                            pane.element.html(jqXHR.responseText)\r\n                        }\r\n\r\n                        pane.element.trigger(Event.PRINTED, pane.element);\r\n                        if (pane._manager.config('debug')) {\r\n                            console.debug('Triggered event:', Event.PRINTED)\r\n                        }\r\n                    }\r\n                },\r\n                error: function (jqXHR, textStatus, errorThrown) {\r\n                    pane._jqXHR = null;\r\n                    pane.loader(false);\r\n\r\n                    let eventLoadingError = $.Event(Event.LOADING_ERROR,\r\n                        {\r\n                            pane: pane,\r\n                            paneAjax: {\r\n                                textStatus: textStatus,\r\n                                jqXHR: jqXHR,\r\n                                errorThrown: errorThrown,\r\n                            }\r\n                        });\r\n\r\n                    // Event trigger\r\n                    pane.element.trigger(eventLoadingError);\r\n                    if (pane._manager.config('debug')) {\r\n                        console.debug('Triggered event:', Event.LOADING_ERROR)\r\n                    }\r\n\r\n                    if (!eventLoadingError.isDefaultPrevented()) {\r\n                        pane.close()\r\n                    }\r\n                }\r\n            };\r\n\r\n            // Event trigger\r\n            pane.element.trigger($.Event(Event.LOADING, {pane: pane, url: options.url}));\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.LOADING)\r\n            }\r\n\r\n            // Loader\r\n            pane.loader(true);\r\n\r\n            // Ajax\r\n            this._jqXHR = $.ajax(options)\r\n        }\r\n\r\n        static _jQueryInterface(action, arg1, arg2) {\r\n            return this.each(function () {\r\n                if (!(typeof $(this).data('pane') === 'object' && $(this).data('pane') instanceof Pane)) {\r\n                    throw new Error('Not a pane')\r\n                }\r\n\r\n                if (typeof action === 'string') {\r\n                    let pane = $(this).data('pane');\r\n\r\n                    switch (action) {\r\n                        case 'close':\r\n                        case 'load':\r\n                        case 'reload':\r\n                        case 'loader':\r\n                            pane[action](arg1, arg2);\r\n                            break;\r\n                        default:\r\n                            throw new TypeError(`No method named \"${action}\"`)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    // jQuery\r\n    $.fn['pane'] = Pane._jQueryInterface;\r\n    $.fn['pane'].noConflict = function () {\r\n        return Pane._jQueryInterface\r\n    };\r\n\r\n    return function (config) {\r\n        return new PaneManager(config)\r\n    }\r\n})($);\r\n\r\nexport default PaneManager\r\n"],"names":["PaneManager","$","TypeError","GetIEVersion","sAgent","window","navigator","userAgent","Idx","indexOf","parseInt","substring","match","Default","debug","container","loader","transitionInTime","transitionOutTime","ajax","Event","SHOW","SHOWN","HIDE","HIDDEN","RELOAD","LOADING","LOADED","LOADING_ERROR","PRINTED","SUBMIT","CLICK_DISMISS","CLICK_DATA_API","SUBMIT_DATA_API","Selector","WRAPPER","LOADER","PANE","PANE_NOT_STATIC","FORM","DATA_TOGGLE","DATA_DISMISS","config","_config","_getConfig","_wrapper","_events","console","length","append","toggleClass","key","Pane","manager","document","off","on","event","preventDefault","stopPropagation","_pane","relatedTarget","pane","href","data","attr","target","error","parents","open","load","paneManager","_manager","_jqXHR","_isTransitioning","_isStatic","_relatedTarget","_href","_loadOptions","_element","element","isStatic","URL","location","toString","wrapper","find","prepend","eventShow","trigger","isDefaultPrevented","refresh","setTimeout","addClass","fragments","eventReload","url","loadOptions","_ajax","eventClose","removeClass","remove","toggle","$loader","close","$form","val","undefined","submitButton","isPlainObject","novalidate","get","checkValidity","bodyHttpRequest","inArray","toLowerCase","formData","_serializeForm","name","value","formDataTmp","forEach","push","method","processData","contentType","dataType","removeData","form","FormData","formParams","serializeArray","each","i","tag","files","file","options","success","textStatus","jqXHR","eventLoaded","paneAjax","first","html","responseText","errorThrown","eventLoadingError","action","arg1","arg2","Error","fn","_jQueryInterface","noConflict"],"mappings":"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"}