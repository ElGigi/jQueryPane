{"version":3,"file":"jquery-pane.js","sources":["../../src/js/Pane.js"],"sourcesContent":["/*\r\n * This file is part of jQuery Pane.\r\n *\r\n * @license   https://opensource.org/licenses/MIT MIT License\r\n * @copyright 2018\r\n * @author Cassie ROUSSEAU <https://github.com/K6-front>\r\n * @author Ronan GIRON <https://github.com/ElGigi>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code, to the root.\r\n */\r\n\r\nimport $ from 'jquery'\r\n\r\nconst PaneManager = (($) => {\r\n  if (typeof $ === 'undefined') {\r\n    throw new TypeError('jQuery Pane requires jQuery. jQuery must be included before.')\r\n  }\r\n\r\n  /**\r\n   * Defaults\r\n   */\r\n\r\n  const Default = {\r\n    debug: false,\r\n    container: 'body',\r\n    transitionInTime: 50,\r\n    transitionOutTime: 400\r\n  }\r\n\r\n  /**\r\n   * Events\r\n   */\r\n\r\n  const Event = {\r\n    LOADING: 'loading.content.pane',\r\n    LOADED: 'loaded.content.pane',\r\n    LOADING_ERROR: 'error.content.pane',\r\n    PRINTED: 'printed.content.pane',\r\n    SHOW: 'show.pane',\r\n    SHOWN: 'shown.pane',\r\n    HIDE: 'hide.pane',\r\n    HIDDEN: 'hidden.pane',\r\n  }\r\n\r\n  /**\r\n   * SELECTORS\r\n   */\r\n\r\n  const Selector = {\r\n    WRAPPER: '.pane-wrapper:first',\r\n    LOADER: '.pane-loader',\r\n    PANE: '.pane',\r\n    FORM: '.pane form:not([target])',\r\n    SUBMIT: '.pane form:not([target]) :submit[name]',\r\n    DATA_TOGGLE: '[data-toggle=\"pane\"]',\r\n    DATA_DISMISS: '[data-dismiss=\"pane\"]',\r\n  }\r\n\r\n  /**\r\n   * PaneManager\r\n   */\r\n  class PaneManager {\r\n    constructor(config) {\r\n      this._config = this._getConfig(config)\r\n      this._wrapper = null\r\n      this._events()\r\n\r\n      // Debug\r\n      if (this.config('debug')) {\r\n        console.debug('PaneManager initialized')\r\n      }\r\n    }\r\n\r\n    // Getters\r\n\r\n    get wrapper() {\r\n      if (!this._wrapper) {\r\n        this._wrapper = $(Selector.WRAPPER)\r\n\r\n        if (this._wrapper.length === 0) {\r\n          this._wrapper = $('<div class=\"pane-wrapper\"></div>')\r\n          $(this._config.container).append(this._wrapper)\r\n        }\r\n      }\r\n\r\n      return this._wrapper\r\n    }\r\n\r\n    // Public\r\n\r\n    refresh() {\r\n      this._wrapper.toggleClass('is-open', $(Selector.PANE, this._wrapper).length > 0)\r\n    }\r\n\r\n    config(key) {\r\n      if (!typeof this._config[key]) {\r\n        throw new TypeError('Undefined option name \"' + key + '\"')\r\n      }\r\n\r\n      return this._config[key]\r\n    }\r\n\r\n    // Private\r\n\r\n    _events() {\r\n      let manager = this\r\n\r\n      $(document)\r\n      //.off('click.pane', Selector.DATA_TOGGLE)\r\n        .on('click.pane',\r\n            Selector.DATA_TOGGLE,\r\n            function (event) {\r\n              event.preventDefault()\r\n\r\n              // Debug\r\n              if (manager.config('debug')) {\r\n                console.debug('Selector', Selector.DATA_TOGGLE, 'has been clicked')\r\n              }\r\n\r\n              let pane = manager._newPane(this)\r\n            })\r\n    }\r\n\r\n    _newPane(relatedTarget) {\r\n      let href = $(relatedTarget).data('href') || $(relatedTarget).attr('href')\r\n\r\n      if (!href) {\r\n        console.error('Pane has no href to load content')\r\n        return\r\n      }\r\n\r\n      let pane = new Pane(this)\r\n      pane.open($(relatedTarget).attr('paneClass') || '')\r\n      pane.load(href)\r\n\r\n      return pane\r\n    }\r\n\r\n    _getConfig(config) {\r\n      config = {\r\n        ...Default,\r\n        ...config\r\n      }\r\n\r\n      return config\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Pane\r\n   */\r\n  class Pane {\r\n    constructor(paneManager) {\r\n      this._manager = paneManager\r\n      this._jqXHR = null\r\n      this._isTransitioning = false\r\n      this._element = null\r\n      this._href = null\r\n\r\n      this._element = $('<div role=\"complementary\" class=\"pane\"></div>')\r\n      this._element.data('pane', this)\r\n      this._events()\r\n    }\r\n\r\n    // Public\r\n\r\n    open(className) {\r\n      // Debug\r\n      if (this._manager.config('debug')) {\r\n        console.debug('Pane opened')\r\n      }\r\n\r\n      let $pane = this._element\r\n\r\n      // Size?\r\n      if (typeof className === 'string') {\r\n        $pane.addClass(className)\r\n      }\r\n\r\n      this._manager.wrapper.prepend(this._element)\r\n      this._manager.refresh()\r\n\r\n      // Event trigger\r\n      $pane.trigger(Event.SHOW)\r\n\r\n      // Animation\r\n      setTimeout(\r\n        function () {\r\n          $pane.addClass('is-visible')\r\n\r\n          // Event trigger\r\n          $pane.trigger(Event.SHOWN)\r\n\r\n          this._isTransitioning = false\r\n        },\r\n        50\r\n      )\r\n    }\r\n\r\n    load(href) {\r\n      // Debug\r\n      if (this._manager.config('debug')) {\r\n        console.debug('Pane loaded')\r\n      }\r\n\r\n      if (typeof href !== 'string') {\r\n        throw new TypeError('Pane::load() method need href in first argument')\r\n      }\r\n\r\n      this._ajax({url: href})\r\n    }\r\n\r\n    close() {\r\n      let $pane = this._element,\r\n        manager = this._manager\r\n\r\n      // Event trigger\r\n      let event = $.Event(Event.HIDE, {pane: $pane})\r\n      $pane.trigger(event)\r\n\r\n      if (!event.isPropagationStopped()) {\r\n        // Animation\r\n        $pane.removeClass('is-visible')\r\n\r\n        // After animation\r\n        setTimeout(\r\n          function () {\r\n            $pane.remove()\r\n            manager.refresh()\r\n\r\n            // Event trigger\r\n            $pane.trigger(Event.HIDDEN)\r\n          },\r\n          400\r\n        )\r\n      }\r\n    }\r\n\r\n    // Private\r\n\r\n    _events() {\r\n      let pane = this\r\n\r\n      this._element\r\n          // Dismiss\r\n          //.off('click.pane', Selector.DATA_DISMISS)\r\n          .on('click.pane',\r\n              Selector.DATA_DISMISS,\r\n              function (event) {\r\n                event.preventDefault()\r\n\r\n                pane.close(event)\r\n              })\r\n          // Submit buttons\r\n          //.off('click.pane', Selector.SUBMIT)\r\n          .on('click.pane',\r\n              Selector.SUBMIT,\r\n              function (event) {\r\n                event.preventDefault()\r\n\r\n                $(this).parents('form').trigger('submit', {'name': $(this).attr('name'), 'value': $(this).val()})\r\n              })\r\n          // Submit form\r\n          //.off('submit.pane', Selector.FORM)\r\n          .on('submit.pane',\r\n              Selector.FORM,\r\n              function (event, button) {\r\n                event.preventDefault()\r\n\r\n                let $form = $(this)\r\n                let $pane = $form.parents('.pane')\r\n\r\n                if ((!$.isFunction($form.get(0).checkValidity) || $form.get(0).checkValidity())) {\r\n                  // Get data of form\r\n                  let formData = $form.serializeArray()\r\n\r\n                  // Add button\r\n                  if ($.isPlainObject(button)) {\r\n                    formData.push(button)\r\n                  }\r\n\r\n                  pane._ajax({})\r\n\r\n                  // Form submission\r\n                  $.ajax($form.attr('action') || $pane.data('href') || '',\r\n                         {\r\n                           'method': $(this).attr('method') || 'get',\r\n                           'data': formData,\r\n                           'dataType': 'json',\r\n                           'success': function (data, textStatus, jqXHR) {\r\n                             // Event trigger\r\n                             $pane.trigger('loaded.content.pane', data, textStatus, jqXHR)\r\n                           },\r\n                           'error': function (jqXHR, textStatus, errorThrown) {\r\n                             // Event trigger\r\n                             $pane.trigger('error.content.pane', jqXHR, textStatus, errorThrown)\r\n                           }\r\n                         })\r\n                }\r\n\r\n                return false\r\n              })\r\n    }\r\n\r\n    _loader(toggle) {\r\n      toggle = typeof toggle === 'boolean' ? toggle : true\r\n\r\n      if (toggle) {\r\n        let $loader = $(Selector.LOADER, this._element)\r\n\r\n        if ($loader.length === 0) {\r\n          $loader = $('<div class=\"pane-loader\"></div>')\r\n          $loader.append(this._manager.config('loader_content'))\r\n          $(this._element).prepend($loader)\r\n        }\r\n      } else {\r\n        $(Selector.LOADER, this._element).remove()\r\n      }\r\n    }\r\n\r\n    _ajax(options) {\r\n      if (this._jqXHR) {\r\n        return\r\n      }\r\n\r\n      let pane = this\r\n\r\n      // Event trigger\r\n      pane._element.trigger(Event.LOADING)\r\n      pane._loader(true)\r\n\r\n      // Ajax options\r\n      options = {\r\n        method: 'get',\r\n        ...options,\r\n        success: function (data, textStatus, jqXHR) {\r\n          let event = $.Event(Event.LOADED,\r\n                              {\r\n                                pane: pane._element,\r\n                                paneAjax: {\r\n                                  data: data,\r\n                                  textStatus: textStatus,\r\n                                  jqXHR: jqXHR\r\n                                }\r\n                              })\r\n\r\n          // Event trigger\r\n          pane._element.trigger(event)\r\n          console.log(pane._element)\r\n\r\n          if (!event.isPropagationStopped()) {\r\n            pane._element.html(jqXHR.responseText)\r\n\r\n            pane._element.trigger(Event.PRINTED, pane._element)\r\n          }\r\n        },\r\n        error: function (jqXHR, textStatus, errorThrown) {\r\n          // Event trigger\r\n          pane._element.trigger(Event.LOADING_ERROR, pane._element, jqXHR, textStatus, errorThrown)\r\n        },\r\n        complete: function () {\r\n          pane._jqXHR = null\r\n          pane._loader(false)\r\n        }\r\n      }\r\n\r\n      // Ajax\r\n      this._jqXHR = $.ajax(options)\r\n    }\r\n  }\r\n\r\n  ///**\r\n  // * jQuery\r\n  // */\r\n  //\r\n  //$(document)\r\n  //  .on(Event.)\r\n\r\n  $(document)\r\n    .on('click',\r\n        '.pane',\r\n        function (event) {\r\n          console.log('clickinternal')\r\n        })\r\n    .on('loaded.content.pane',\r\n        '.pane',\r\n        function (event) {\r\n          console.log('internal')\r\n        })\r\n\r\n  return function (config) {\r\n    return new PaneManager(config)\r\n  }\r\n})($)\r\n\r\nexport default PaneManager"],"names":["PaneManager","$","TypeError","Default","debug","container","transitionInTime","transitionOutTime","Event","LOADING","LOADED","LOADING_ERROR","PRINTED","SHOW","SHOWN","HIDE","HIDDEN","Selector","WRAPPER","LOADER","PANE","FORM","SUBMIT","DATA_TOGGLE","DATA_DISMISS","config","_config","_getConfig","_wrapper","_events","console","toggleClass","length","key","manager","document","on","event","preventDefault","pane","_newPane","relatedTarget","href","data","attr","error","Pane","open","load","append","paneManager","_manager","_jqXHR","_isTransitioning","_element","_href","className","$pane","addClass","wrapper","prepend","refresh","trigger","setTimeout","_ajax","url","isPropagationStopped","removeClass","remove","close","parents","val","button","$form","isFunction","get","checkValidity","formData","serializeArray","isPlainObject","push","ajax","textStatus","jqXHR","errorThrown","toggle","$loader","options","_loader","method","success","paneAjax","log","html","responseText","complete"],"mappings":"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"}