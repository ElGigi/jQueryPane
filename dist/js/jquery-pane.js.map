{"version":3,"file":"jquery-pane.js","sources":["../../src/js/Pane.js"],"sourcesContent":["/*\n * This file is part of jQuery Pane.\n *\n * @license   https://opensource.org/licenses/MIT MIT License\n * @copyright 2018\n * @author Cassie ROUSSEAU <https://github.com/K6-front>\n * @author Ronan GIRON <https://github.com/ElGigi>\n * @author Yohann LORANT <https://github.com/ylorant>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code, to the root.\n */\n\nimport $ from 'jquery';\n\nconst PaneManager = (($) => {\n  // Check jQuery requirements\n  if (typeof $ === 'undefined') {\n    throw new TypeError('jQuery Pane requires jQuery. jQuery must be included before.');\n  }\n\n  /**\n   * Get Internet Explorer version.\n   *\n   * @return {number}\n   */\n  function GetIEVersion() {\n    let sAgent = window.navigator.userAgent;\n    let Idx = sAgent.indexOf(\"MSIE\");\n\n    // If IE, return version number.\n    if (Idx > 0) {\n      return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)))\n    }\n    // If IE 11 then look for Updated user agent string.\n    else if (!!navigator.userAgent.match(/Trident\\/7\\./)) {\n      return 11\n    } else {\n      return 0 //It is not IE\n    }\n  }\n\n  /**\n   * Defaults\n   */\n\n  const Default = {\n    debug: false,\n    container: 'body',\n    loader: '',\n    transitionInTime: 50,\n    transitionOutTime: 400,\n    ajax: {},\n  };\n\n  /**\n   * Events\n   */\n\n  const Event = {\n    // Pane\n    SHOW: 'show.pane',\n    SHOWN: 'shown.pane',\n    HIDE: 'hide.pane',\n    HIDDEN: 'hidden.pane',\n    // Pane content\n    RELOAD: 'reload.content.pane',\n    LOADING: 'loading.content.pane',\n    LOADED: 'loaded.content.pane',\n    LOADING_ERROR: 'error.content.pane',\n    PRINTED: 'printed.content.pane',\n    SUBMIT: 'submit.content.pane',\n    // Selectors\n    CLICK_DISMISS: 'click.dismiss.pane',\n    CLICK_DATA_API: 'click.pane',\n    SUBMIT_DATA_API: 'submit.pane',\n  };\n\n  /**\n   * SELECTORS\n   */\n\n  const Selector = {\n    WRAPPER: '.pane-wrapper:first',\n    LOADER: '.pane-loader',\n    PANE: '.pane',\n    PANE_NOT_STATIC: '.pane:not(.pane-static)',\n    FORM: 'form:not([target])',\n    SUBMIT: 'form:not([target]) :submit[name]',\n    DATA_TOGGLE: '[data-toggle=\"pane\"]',\n    DATA_DISMISS: '[data-dismiss=\"pane\"]',\n  };\n\n  /**\n   * PaneManager\n   */\n  class PaneManager {\n    constructor(config) {\n      this._config = this._getConfig(config);\n      this._wrapper = null;\n      this._events();\n\n      // Debug\n      if (this.config('debug')) {\n        console.debug('PaneManager initialized')\n      }\n    }\n\n    // Getters\n\n    get wrapper() {\n      if (!this._wrapper) {\n        this._wrapper = $(Selector.WRAPPER);\n\n        if (this._wrapper.length === 0) {\n          this._wrapper = $('<div class=\"pane-wrapper\"></div>');\n          $(this._config.container).append(this._wrapper)\n        }\n\n        // Internet explorer\n        this._wrapper.toggleClass('pane-ie', GetIEVersion() > 0)\n      }\n\n      return this._wrapper\n    }\n\n    // Public\n\n    refresh() {\n      this._wrapper.toggleClass('is-open', $(Selector.PANE_NOT_STATIC, this._wrapper).length > 0)\n    }\n\n    config(key) {\n      if (!typeof this._config[key]) {\n        throw new TypeError('Undefined option name \"' + key + '\"')\n      }\n\n      return this._config[key]\n    }\n\n    new() {\n      return new Pane(this)\n    }\n\n    // Private\n\n    _events() {\n      let manager = this;\n\n      $(document)\n        .off(Event.CLICK_DATA_API, Selector.DATA_TOGGLE)\n        .on(Event.CLICK_DATA_API,\n          Selector.DATA_TOGGLE,\n          function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            // Debug\n            if (manager.config('debug')) {\n              console.debug('Selector', Selector.DATA_TOGGLE, 'has been clicked')\n            }\n\n            manager._pane(this)\n          })\n    }\n\n    _pane(relatedTarget) {\n      let pane = null,\n        href = $(relatedTarget).data('href') || $(relatedTarget).attr('href'),\n        target = $(relatedTarget).data('paneTarget') || '';\n\n      if (!href) {\n        console.error('Pane has no href to load content');\n        return\n      }\n\n      // Target self?\n      if (target === 'self') {\n        pane = $(relatedTarget).parents(Selector.PANE).data('pane')\n      }\n\n      // Need to create pane?\n      if (!pane) {\n        pane = this.new()\n      }\n      pane.relatedTarget = relatedTarget;\n      pane.open();\n      pane.load(href, $(relatedTarget).data('paneLoadOptions'));\n\n      return pane\n    }\n\n    _getConfig(config) {\n      config = {\n        ...Default,\n        ...config\n      };\n\n      return config\n    }\n  }\n\n  /**\n   * Pane\n   */\n  class Pane {\n    constructor(paneManager) {\n      this._manager = paneManager;\n      this._jqXHR = null;\n      this._isTransitioning = false;\n      this._isStatic = false;\n      this._relatedTarget = null;\n      this._href = null;\n      this._loadOptions = {};\n    }\n\n    // Getters\n\n    get relatedTarget() {\n      return this._relatedTarget\n    }\n\n    get element() {\n      if (!this._element) {\n        // Default element\n        this._element = $('<div role=\"complementary\" class=\"pane\"></div>');\n        this._element.data('pane', this);\n        this._events()\n      }\n\n      return this._element\n    }\n\n    get static() {\n      return this._isStatic\n    }\n\n    get location() {\n      return new URL(this._href, document.location.toString())\n    }\n\n    // Setters\n\n    set relatedTarget(relatedTarget) {\n      this._relatedTarget = relatedTarget\n    }\n\n    set element(element) {\n      this._element = element;\n      this._isStatic = true;\n      this._element.data('pane', this);\n      this._events()\n    }\n\n    set static(isStatic) {\n      this._isStatic = isStatic === true\n    }\n\n    set location(location) {\n      this._href = location.toString()\n    }\n\n    // Public\n\n    open() {\n      if (this._isStatic) {\n        return\n      }\n\n      if (this._isTransitioning) {\n        return\n      }\n\n      let pane = this;\n      this._isTransitioning = true;\n      this._manager.wrapper.prepend(this.element);\n\n      // Event trigger\n      let eventShow = $.Event(Event.SHOW, {pane: pane});\n      pane.element.trigger(eventShow);\n      if (pane._manager.config('debug')) {\n        console.debug('Triggered event:', Event.SHOW);\n      }\n\n      if (!eventShow.isDefaultPrevented()) {\n        this._manager.refresh();\n\n        // Animation\n        setTimeout(\n          function () {\n            pane.element.addClass('is-visible');\n\n            pane._isTransitioning = false;\n\n            // Event trigger\n            pane.element.trigger(Event.SHOWN);\n            if (pane._manager.config('debug')) {\n              console.debug('Triggered event:', Event.SHOWN)\n            }\n          },\n          50\n        )\n      }\n    }\n\n    reload(fragments) {\n      let pane = this;\n\n      // Event trigger\n      let eventReload = $.Event(Event.RELOAD, {pane: pane});\n      pane.element.trigger(eventReload);\n      if (pane._manager.config('debug')) {\n        console.debug('Triggered event:', Event.RELOAD);\n      }\n\n      if (!eventReload.isDefaultPrevented()) {\n        this.load(this._href, null, fragments)\n      }\n    }\n\n    load(href, loadOptions, fragments) {\n      if (typeof href !== 'string') {\n        throw new TypeError('Pane::load() method need href in first argument')\n      }\n\n      // Set to private properties\n      this._href = href.toString();\n      if (typeof loadOptions === 'object') {\n        this._loadOptions = loadOptions\n      }\n\n      // Load content with AJAX\n      this._ajax(\n        {\n          url: this._href,\n          ...this._loadOptions,\n        },\n        fragments\n      )\n    }\n\n    close() {\n      if (this._isStatic) {\n        return\n      }\n\n      if (this._isTransitioning) {\n        return\n      }\n\n      let pane = this,\n        manager = this._manager;\n\n      // Event trigger\n      let eventClose = $.Event(Event.HIDE, {pane: pane.element});\n      pane.element.trigger(eventClose);\n      if (pane._manager.config('debug')) {\n        console.debug('Triggered event:', Event.HIDE)\n      }\n\n      if (!eventClose.isDefaultPrevented()) {\n        // Animation\n        this._isTransitioning = true;\n        pane.element.removeClass('is-visible');\n\n        // After animation\n        setTimeout(\n          function () {\n            // Event trigger\n            pane.element.trigger(Event.HIDDEN);\n            if (pane._manager.config('debug')) {\n              console.debug('Triggered event:', Event.HIDDEN)\n            }\n\n            pane._isTransitioning = false;\n            pane.element.remove();\n            manager.refresh()\n          },\n          400\n        )\n      }\n    }\n\n    loader(toggle) {\n      toggle = typeof toggle === 'boolean' ? toggle : true;\n\n      if (toggle) {\n        let $loader = $(Selector.LOADER, this.element);\n\n        if ($loader.length === 0) {\n          $loader = $('<div class=\"pane-loader\"></div>');\n          $loader.append(this._manager.config('loader'));\n          $(this.element).prepend($loader)\n        }\n      } else {\n        $(Selector.LOADER, this.element).remove()\n      }\n    }\n\n    // Private\n\n    _events() {\n      let pane = this;\n\n      this.element\n        // Dismiss\n        .off(Event.CLICK_DISMISS, Selector.DATA_DISMISS)\n        .on(Event.CLICK_DISMISS,\n          Selector.DATA_DISMISS,\n          function (event) {\n            event.preventDefault();\n\n            pane.close()\n          })\n        // Submit buttons\n        .off(Event.CLICK_DATA_API, Selector.SUBMIT)\n        .on(Event.CLICK_DATA_API,\n          Selector.SUBMIT,\n          function () {\n            let $form = $(this).parents('form');\n\n            $form.data('submitButton',\n              {\n                'name': $(this).attr('name'),\n                'value': $(this).val(),\n                'novalidate': ($(this).attr('formnovalidate') !== undefined)\n              })\n          })\n        // Submit form\n        .off(Event.SUBMIT_DATA_API, Selector.FORM)\n        .on(Event.SUBMIT_DATA_API,\n          Selector.FORM,\n          function (event) {\n            event.preventDefault();\n\n            let $form = $(this);\n\n            // Submit button\n            let submitButton = null;\n            if ($.isPlainObject($form.data('submitButton'))) {\n              submitButton = $form.data('submitButton')\n            }\n\n            if ((submitButton && submitButton.novalidate) ||\n              typeof $form.get(0).checkValidity !== 'function' ||\n              $form.get(0).checkValidity()) {\n              // Get data of form\n              let bodyHttpRequest = $.inArray(($(this).attr('method') || 'get').toLowerCase(), ['post', 'put', 'connect', 'patch']) !== -1;\n              let formData = pane._serializeForm($form);\n\n              // Add button to form data\n              if (submitButton) {\n                formData.append(submitButton.name, submitButton.value)\n              }\n\n              // Convert to JSON if no body request\n              if (!bodyHttpRequest) {\n                let formDataTmp = [];\n                formData.forEach((value, name) => {\n                  formDataTmp.push({name: name, value: value})\n                });\n                formData = formDataTmp\n              }\n\n              // Form submission\n              pane._ajax({\n                url: $(this).attr('action') || pane._href,\n                method: $(this).attr('method') || 'get',\n                processData: !bodyHttpRequest,\n                contentType: bodyHttpRequest ? false : 'text/plain',\n                data: formData,\n                dataType: 'json'\n              });\n\n              // Remove submit button reference\n              $form.removeData('submitButton')\n            }\n          })\n    }\n\n    _serializeForm(form) {\n      let\n        formData = new FormData(),\n        formParams = form.serializeArray();\n\n      $.each(form.find('input[type=\"file\"]'), function (i, tag) {\n        $.each($(tag)[0].files, function (i, file) {\n          formData.append(tag.name, file)\n        })\n      });\n\n      $.each(formParams, function (i, val) {\n        formData.append(val.name, val.value)\n      });\n\n      return formData\n    }\n\n    _ajax(options, fragments) {\n      if (this._jqXHR) {\n        return\n      }\n\n      let pane = this;\n\n      // Event trigger\n      pane.element.trigger(Event.LOADING);\n      if (pane._manager.config('debug')) {\n        console.debug('Triggered event:', Event.LOADING)\n      }\n      pane.loader(true);\n\n      // Ajax options\n      options = {\n        method: 'get',\n        ...this._manager.config('ajax'),\n        ...options,\n        success: function (data, textStatus, jqXHR) {\n          pane._jqXHR = null;\n          pane.loader(false);\n\n          let eventLoaded = $.Event(Event.LOADED,\n            {\n              pane: pane,\n              paneAjax: {\n                data: data,\n                textStatus: textStatus,\n                jqXHR: jqXHR,\n                fragments: fragments || null,\n              }\n            });\n\n          // Event trigger\n          pane.element.trigger(eventLoaded);\n          if (pane._manager.config('debug')) {\n            console.debug('Triggered event:', Event.LOADED)\n          }\n\n          if (!eventLoaded.isDefaultPrevented()) {\n            if (fragments) {\n              $(fragments, pane.element).first().html($(jqXHR.responseText).find(fragments).html())\n            } else {\n              pane.element.html(jqXHR.responseText)\n            }\n\n            pane.element.trigger(Event.PRINTED, pane.element);\n            if (pane._manager.config('debug')) {\n              console.debug('Triggered event:', Event.PRINTED)\n            }\n          }\n        },\n        error: function (jqXHR, textStatus, errorThrown) {\n          pane._jqXHR = null;\n          pane.loader(false);\n\n          let eventLoadingError = $.Event(Event.LOADING_ERROR,\n            {\n              pane: pane,\n              paneAjax: {\n                textStatus: textStatus,\n                jqXHR: jqXHR,\n                errorThrown: errorThrown,\n              }\n            });\n\n          // Event trigger\n          pane.element.trigger(eventLoadingError);\n          if (pane._manager.config('debug')) {\n            console.debug('Triggered event:', Event.LOADING_ERROR)\n          }\n\n          if (!eventLoadingError.isDefaultPrevented()) {\n            pane.close()\n          }\n        }\n      };\n\n      // Ajax\n      this._jqXHR = $.ajax(options)\n    }\n\n    static _jQueryInterface(action, arg1, arg2) {\n      return this.each(function () {\n        if (!(typeof $(this).data('pane') === 'object' && $(this).data('pane') instanceof Pane)) {\n          throw new Error('Not a pane')\n        }\n\n        if (typeof action === 'string') {\n          let pane = $(this).data('pane');\n\n          switch (action) {\n            case 'close':\n            case 'load':\n            case 'reload':\n            case 'loader':\n              pane[action](arg1, arg2);\n              break;\n            default:\n              throw new TypeError(`No method named \"${action}\"`)\n          }\n        }\n      })\n    }\n  }\n\n  // jQuery\n  $.fn['pane'] = Pane._jQueryInterface;\n  $.fn['pane'].noConflict = function () {\n    return Pane._jQueryInterface\n  };\n\n  return function (config) {\n    return new PaneManager(config)\n  }\n})($);\n\nexport default PaneManager\n"],"names":["PaneManager","$","TypeError","GetIEVersion","sAgent","window","navigator","userAgent","Idx","indexOf","parseInt","substring","match","Default","debug","container","loader","transitionInTime","transitionOutTime","ajax","Event","SHOW","SHOWN","HIDE","HIDDEN","RELOAD","LOADING","LOADED","LOADING_ERROR","PRINTED","SUBMIT","CLICK_DISMISS","CLICK_DATA_API","SUBMIT_DATA_API","Selector","WRAPPER","LOADER","PANE","PANE_NOT_STATIC","FORM","DATA_TOGGLE","DATA_DISMISS","config","_config","_getConfig","_wrapper","_events","console","toggleClass","length","key","Pane","manager","document","off","on","event","preventDefault","stopPropagation","_pane","relatedTarget","pane","href","data","attr","target","error","parents","open","load","append","paneManager","_manager","_jqXHR","_isTransitioning","_isStatic","_relatedTarget","_href","_loadOptions","wrapper","prepend","element","eventShow","trigger","isDefaultPrevented","refresh","setTimeout","addClass","fragments","eventReload","loadOptions","toString","_ajax","url","eventClose","removeClass","remove","toggle","$loader","close","$form","val","undefined","submitButton","isPlainObject","novalidate","get","checkValidity","bodyHttpRequest","inArray","toLowerCase","formData","_serializeForm","name","value","formDataTmp","forEach","push","method","processData","contentType","dataType","removeData","form","FormData","formParams","serializeArray","each","find","i","tag","files","file","options","success","textStatus","jqXHR","eventLoaded","paneAjax","first","html","responseText","errorThrown","eventLoadingError","_element","isStatic","URL","location","action","arg1","arg2","Error","fn","_jQueryInterface","noConflict"],"mappings":"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"}