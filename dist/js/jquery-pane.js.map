{"version":3,"file":"jquery-pane.js","sources":["../../src/js/Pane.js"],"sourcesContent":["/*\r\n * This file is part of jQuery Pane.\r\n *\r\n * @license   https://opensource.org/licenses/MIT MIT License\r\n * @copyright 2018\r\n * @author Cassie ROUSSEAU <https://github.com/K6-front>\r\n * @author Ronan GIRON <https://github.com/ElGigi>\r\n * @author Yohann LORANT <https://github.com/ylorant>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code, to the root.\r\n */\r\n\r\nimport $ from 'jquery';\r\n\r\nconst PaneManager = (($) => {\r\n    // Check jQuery requirements\r\n    if (typeof $ === 'undefined') {\r\n        throw new TypeError('jQuery Pane requires jQuery. jQuery must be included before.');\r\n    }\r\n\r\n    /**\r\n     * Get Internet Explorer version.\r\n     *\r\n     * @return {number}\r\n     */\r\n    function GetIEVersion() {\r\n        let sAgent = window.navigator.userAgent;\r\n        let Idx = sAgent.indexOf(\"MSIE\");\r\n\r\n        // If IE, return version number.\r\n        if (Idx > 0) {\r\n            return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(\".\", Idx)))\r\n        }\r\n        // If IE 11 then look for Updated user agent string.\r\n        else if (!!navigator.userAgent.match(/Trident\\/7\\./)) {\r\n            return 11\r\n        } else {\r\n            return 0 //It is not IE\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Defaults\r\n     */\r\n\r\n    const Default = {\r\n        debug: false,\r\n        container: 'body',\r\n        loader: '',\r\n        transitionInTime: 50,\r\n        transitionOutTime: 400,\r\n        ajax: {},\r\n    };\r\n\r\n    /**\r\n     * Events\r\n     */\r\n\r\n    const Event = {\r\n        // Pane\r\n        SHOW: 'show.pane',\r\n        SHOWN: 'shown.pane',\r\n        HIDE: 'hide.pane',\r\n        HIDDEN: 'hidden.pane',\r\n        // Pane content\r\n        RELOAD: 'reload.content.pane',\r\n        LOADING: 'loading.content.pane',\r\n        LOADED: 'loaded.content.pane',\r\n        LOADING_ERROR: 'error.content.pane',\r\n        PRINTED: 'printed.content.pane',\r\n        SUBMIT: 'submit.content.pane',\r\n        // Selectors\r\n        CLICK_DISMISS: 'click.dismiss.pane',\r\n        CLICK_DATA_API: 'click.pane',\r\n        SUBMIT_DATA_API: 'submit.pane',\r\n    };\r\n\r\n    /**\r\n     * SELECTORS\r\n     */\r\n\r\n    const Selector = {\r\n        WRAPPER: '.pane-wrapper:first',\r\n        LOADER: '.pane-loader',\r\n        PANE: '.pane',\r\n        PANE_NOT_STATIC: '.pane:not(.pane-static)',\r\n        FORM: 'form:not([target])',\r\n        SUBMIT: 'form:not([target]) :submit[name]',\r\n        DATA_TOGGLE: '[data-toggle=\"pane\"]',\r\n        DATA_DISMISS: '[data-dismiss=\"pane\"]',\r\n    };\r\n\r\n    /**\r\n     * PaneManager\r\n     */\r\n    class PaneManager {\r\n        constructor(config) {\r\n            this._config = this._getConfig(config);\r\n            this._wrapper = null;\r\n            this._events();\r\n\r\n            // Debug\r\n            if (this.config('debug')) {\r\n                console.debug('PaneManager initialized')\r\n            }\r\n        }\r\n\r\n        // Getters\r\n\r\n        get wrapper() {\r\n            if (!this._wrapper) {\r\n                this._wrapper = $(Selector.WRAPPER);\r\n\r\n                if (this._wrapper.length === 0) {\r\n                    this._wrapper = $('<div class=\"pane-wrapper\"></div>');\r\n                    $(this._config.container).append(this._wrapper)\r\n                }\r\n\r\n                // Internet explorer\r\n                this._wrapper.toggleClass('pane-ie', GetIEVersion() > 0)\r\n            }\r\n\r\n            return this._wrapper\r\n        }\r\n\r\n        // Public\r\n\r\n        refresh() {\r\n            this._wrapper.toggleClass('is-open', $(Selector.PANE_NOT_STATIC, this._wrapper).length > 0)\r\n        }\r\n\r\n        config(key) {\r\n            if (!typeof this._config[key]) {\r\n                throw new TypeError('Undefined option name \"' + key + '\"')\r\n            }\r\n\r\n            return this._config[key]\r\n        }\r\n\r\n        new() {\r\n            return new Pane(this)\r\n        }\r\n\r\n        // Private\r\n\r\n        _events() {\r\n            let manager = this;\r\n\r\n            $(document)\r\n                .off(Event.CLICK_DATA_API, Selector.DATA_TOGGLE)\r\n                .on(Event.CLICK_DATA_API,\r\n                    Selector.DATA_TOGGLE,\r\n                    function (event) {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n\r\n                        // Debug\r\n                        if (manager.config('debug')) {\r\n                            console.debug('Selector', Selector.DATA_TOGGLE, 'has been clicked')\r\n                        }\r\n\r\n                        manager._pane(this)\r\n                    })\r\n        }\r\n\r\n        _pane(relatedTarget) {\r\n            let pane = null,\r\n                href = $(relatedTarget).data('href') || $(relatedTarget).attr('href'),\r\n                target = $(relatedTarget).data('paneTarget') || '';\r\n\r\n            if (!href) {\r\n                console.error('Pane has no href to load content');\r\n                return\r\n            }\r\n\r\n            // Target self?\r\n            if (target === 'self') {\r\n                pane = $(relatedTarget).parents(Selector.PANE).data('pane')\r\n            }\r\n\r\n            // Need to create pane?\r\n            if (!pane) {\r\n                pane = this.new()\r\n            }\r\n            pane.relatedTarget = relatedTarget;\r\n            pane.open();\r\n            pane.load(href, $(relatedTarget).data('paneLoadOptions'));\r\n\r\n            return pane\r\n        }\r\n\r\n        _getConfig(config) {\r\n            config = {\r\n                ...Default,\r\n                ...config\r\n            };\r\n\r\n            return config\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Pane\r\n     */\r\n    class Pane {\r\n        constructor(paneManager) {\r\n            this._manager = paneManager;\r\n            this._jqXHR = null;\r\n            this._isTransitioning = false;\r\n            this._isStatic = false;\r\n            this._relatedTarget = null;\r\n            this._href = null;\r\n            this._loadOptions = {};\r\n        }\r\n\r\n        // Getters\r\n\r\n        get relatedTarget() {\r\n            return this._relatedTarget\r\n        }\r\n\r\n        get element() {\r\n            if (!this._element) {\r\n                // Default element\r\n                this._element = $('<div role=\"complementary\" class=\"pane\"></div>');\r\n                this._element.data('pane', this);\r\n                this._events()\r\n            }\r\n\r\n            return this._element\r\n        }\r\n\r\n        get static() {\r\n            return this._isStatic\r\n        }\r\n\r\n        get location() {\r\n            return new URL(this._href, document.location.toString())\r\n        }\r\n\r\n        // Setters\r\n\r\n        set relatedTarget(relatedTarget) {\r\n            this._relatedTarget = relatedTarget\r\n        }\r\n\r\n        set element(element) {\r\n            this._element = element;\r\n            this._isStatic = true;\r\n            this._element.data('pane', this);\r\n            this._events()\r\n        }\r\n\r\n        set static(isStatic) {\r\n            this._isStatic = isStatic === true\r\n        }\r\n\r\n        set location(location) {\r\n            this._href = location.toString()\r\n        }\r\n\r\n        // Public\r\n\r\n        open() {\r\n            if (this._isStatic) {\r\n                return\r\n            }\r\n\r\n            if (this._isTransitioning) {\r\n                return\r\n            }\r\n\r\n            let pane = this;\r\n            this._isTransitioning = true;\r\n            this._manager.wrapper.prepend(this.element);\r\n\r\n            // Event trigger\r\n            let eventShow = $.Event(Event.SHOW, {pane: pane});\r\n            pane.element.trigger(eventShow);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.SHOW);\r\n            }\r\n\r\n            if (!eventShow.isDefaultPrevented()) {\r\n                this._manager.refresh();\r\n\r\n                // Animation\r\n                setTimeout(\r\n                    function () {\r\n                        pane.element.addClass('is-visible');\r\n\r\n                        pane._isTransitioning = false;\r\n\r\n                        // Event trigger\r\n                        pane.element.trigger(Event.SHOWN);\r\n                        if (pane._manager.config('debug')) {\r\n                            console.debug('Triggered event:', Event.SHOWN)\r\n                        }\r\n                    },\r\n                    50\r\n                )\r\n            }\r\n        }\r\n\r\n        reload(fragments) {\r\n            let pane = this;\r\n\r\n            // Event trigger\r\n            let eventReload = $.Event(Event.RELOAD, {pane: pane, url: this._href});\r\n            pane.element.trigger(eventReload);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.RELOAD);\r\n            }\r\n\r\n            if (!eventReload.isDefaultPrevented()) {\r\n                this.load(this._href, null, fragments)\r\n            }\r\n        }\r\n\r\n        load(href, loadOptions, fragments) {\r\n            if (typeof href !== 'string') {\r\n                throw new TypeError('Pane::load() method need href in first argument')\r\n            }\r\n\r\n            // Set to private properties\r\n            this._href = href.toString();\r\n            if (typeof loadOptions === 'object') {\r\n                this._loadOptions = loadOptions\r\n            }\r\n\r\n            // Load content with AJAX\r\n            this._ajax(\r\n                {\r\n                    url: this._href,\r\n                    ...this._loadOptions,\r\n                },\r\n                fragments\r\n            )\r\n        }\r\n\r\n        close() {\r\n            if (this._isStatic) {\r\n                return\r\n            }\r\n\r\n            if (this._isTransitioning) {\r\n                return\r\n            }\r\n\r\n            let pane = this,\r\n                manager = this._manager;\r\n\r\n            // Event trigger\r\n            let eventClose = $.Event(Event.HIDE, {pane: pane.element});\r\n            pane.element.trigger(eventClose);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.HIDE)\r\n            }\r\n\r\n            if (!eventClose.isDefaultPrevented()) {\r\n                // Animation\r\n                this._isTransitioning = true;\r\n                pane.element.removeClass('is-visible');\r\n\r\n                // After animation\r\n                setTimeout(\r\n                    function () {\r\n                        // Event trigger\r\n                        pane.element.trigger(Event.HIDDEN);\r\n                        if (pane._manager.config('debug')) {\r\n                            console.debug('Triggered event:', Event.HIDDEN)\r\n                        }\r\n\r\n                        pane._isTransitioning = false;\r\n                        pane.element.remove();\r\n                        manager.refresh()\r\n                    },\r\n                    400\r\n                )\r\n            }\r\n        }\r\n\r\n        loader(toggle) {\r\n            toggle = typeof toggle === 'boolean' ? toggle : true;\r\n\r\n            if (toggle) {\r\n                let $loader = $(Selector.LOADER, this.element);\r\n\r\n                if ($loader.length === 0) {\r\n                    $loader = $('<div class=\"pane-loader\"></div>');\r\n                    $loader.append(this._manager.config('loader'));\r\n                    $(this.element).prepend($loader)\r\n                }\r\n            } else {\r\n                $(Selector.LOADER, this.element).remove()\r\n            }\r\n        }\r\n\r\n        // Private\r\n\r\n        _events() {\r\n            let pane = this;\r\n\r\n            this.element\r\n                // Dismiss\r\n                .off(Event.CLICK_DISMISS, Selector.DATA_DISMISS)\r\n                .on(Event.CLICK_DISMISS,\r\n                    Selector.DATA_DISMISS,\r\n                    function (event) {\r\n                        event.preventDefault();\r\n\r\n                        pane.close()\r\n                    })\r\n                // Submit buttons\r\n                .off(Event.CLICK_DATA_API, Selector.SUBMIT)\r\n                .on(Event.CLICK_DATA_API,\r\n                    Selector.SUBMIT,\r\n                    function () {\r\n                        let $form = $(this).parents('form');\r\n\r\n                        $form.data('submitButton',\r\n                            {\r\n                                'name': $(this).attr('name'),\r\n                                'value': $(this).val(),\r\n                                'novalidate': ($(this).attr('formnovalidate') !== undefined)\r\n                            })\r\n                    })\r\n                // Submit form\r\n                .off(Event.SUBMIT_DATA_API, Selector.FORM)\r\n                .on(Event.SUBMIT_DATA_API,\r\n                    Selector.FORM,\r\n                    function (event) {\r\n                        event.preventDefault();\r\n\r\n                        let $form = $(this);\r\n\r\n                        // Submit button\r\n                        let submitButton = null;\r\n                        if ($.isPlainObject($form.data('submitButton'))) {\r\n                            submitButton = $form.data('submitButton')\r\n                        }\r\n\r\n                        if ((submitButton && submitButton.novalidate) ||\r\n                            typeof $form.get(0).checkValidity !== 'function' ||\r\n                            $form.get(0).checkValidity()) {\r\n                            // Get data of form\r\n                            let bodyHttpRequest = $.inArray(($(this).attr('method') || 'get').toLowerCase(), ['post', 'put', 'connect', 'patch']) !== -1;\r\n                            let formData = pane._serializeForm($form);\r\n\r\n                            // Add button to form data\r\n                            if (submitButton) {\r\n                                formData.append(submitButton.name, submitButton.value)\r\n                            }\r\n\r\n                            // Convert to JSON if no body request\r\n                            if (!bodyHttpRequest) {\r\n                                let formDataTmp = [];\r\n                                formData.forEach((value, name) => {\r\n                                    formDataTmp.push({name: name, value: value})\r\n                                });\r\n                                formData = formDataTmp\r\n                            }\r\n\r\n                            // Form submission\r\n                            pane._ajax({\r\n                                url: $(this).attr('action') || pane._href,\r\n                                method: $(this).attr('method') || 'get',\r\n                                processData: !bodyHttpRequest,\r\n                                contentType: bodyHttpRequest ? false : 'text/plain',\r\n                                data: formData,\r\n                                dataType: 'json'\r\n                            });\r\n\r\n                            // Remove submit button reference\r\n                            $form.removeData('submitButton')\r\n                        }\r\n                    })\r\n        }\r\n\r\n        _serializeForm(form) {\r\n            let\r\n                formData = new FormData(),\r\n                formParams = form.serializeArray();\r\n\r\n            $.each(form.find('input[type=\"file\"]'), function (i, tag) {\r\n                $.each($(tag)[0].files, function (i, file) {\r\n                    formData.append(tag.name, file)\r\n                })\r\n            });\r\n\r\n            $.each(formParams, function (i, val) {\r\n                formData.append(val.name, val.value)\r\n            });\r\n\r\n            return formData\r\n        }\r\n\r\n        _ajax(options, fragments) {\r\n            if (this._jqXHR) {\r\n                return\r\n            }\r\n\r\n            let pane = this;\r\n\r\n            // Event trigger\r\n            pane.element.trigger(Event.LOADING);\r\n            if (pane._manager.config('debug')) {\r\n                console.debug('Triggered event:', Event.LOADING)\r\n            }\r\n            pane.loader(true);\r\n\r\n            // Ajax options\r\n            options = {\r\n                method: 'get',\r\n                ...this._manager.config('ajax'),\r\n                ...options,\r\n                success: function (data, textStatus, jqXHR) {\r\n                    pane._jqXHR = null;\r\n                    pane.loader(false);\r\n\r\n                    let eventLoaded = $.Event(Event.LOADED,\r\n                        {\r\n                            pane: pane,\r\n                            url: options.url,\r\n                            paneAjax: {\r\n                                data: data,\r\n                                textStatus: textStatus,\r\n                                jqXHR: jqXHR,\r\n                                fragments: fragments || null,\r\n                            }\r\n                        });\r\n\r\n                    // Event trigger\r\n                    pane.element.trigger(eventLoaded);\r\n                    if (pane._manager.config('debug')) {\r\n                        console.debug('Triggered event:', Event.LOADED)\r\n                    }\r\n\r\n                    if (!eventLoaded.isDefaultPrevented()) {\r\n                        if (fragments) {\r\n                            $(fragments, pane.element).first().html($(jqXHR.responseText).find(fragments).html())\r\n                        } else {\r\n                            pane.element.html(jqXHR.responseText)\r\n                        }\r\n\r\n                        pane.element.trigger(Event.PRINTED, pane.element);\r\n                        if (pane._manager.config('debug')) {\r\n                            console.debug('Triggered event:', Event.PRINTED)\r\n                        }\r\n                    }\r\n                },\r\n                error: function (jqXHR, textStatus, errorThrown) {\r\n                    pane._jqXHR = null;\r\n                    pane.loader(false);\r\n\r\n                    let eventLoadingError = $.Event(Event.LOADING_ERROR,\r\n                        {\r\n                            pane: pane,\r\n                            paneAjax: {\r\n                                textStatus: textStatus,\r\n                                jqXHR: jqXHR,\r\n                                errorThrown: errorThrown,\r\n                            }\r\n                        });\r\n\r\n                    // Event trigger\r\n                    pane.element.trigger(eventLoadingError);\r\n                    if (pane._manager.config('debug')) {\r\n                        console.debug('Triggered event:', Event.LOADING_ERROR)\r\n                    }\r\n\r\n                    if (!eventLoadingError.isDefaultPrevented()) {\r\n                        pane.close()\r\n                    }\r\n                }\r\n            };\r\n\r\n            // Ajax\r\n            this._jqXHR = $.ajax(options)\r\n        }\r\n\r\n        static _jQueryInterface(action, arg1, arg2) {\r\n            return this.each(function () {\r\n                if (!(typeof $(this).data('pane') === 'object' && $(this).data('pane') instanceof Pane)) {\r\n                    throw new Error('Not a pane')\r\n                }\r\n\r\n                if (typeof action === 'string') {\r\n                    let pane = $(this).data('pane');\r\n\r\n                    switch (action) {\r\n                        case 'close':\r\n                        case 'load':\r\n                        case 'reload':\r\n                        case 'loader':\r\n                            pane[action](arg1, arg2);\r\n                            break;\r\n                        default:\r\n                            throw new TypeError(`No method named \"${action}\"`)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    // jQuery\r\n    $.fn['pane'] = Pane._jQueryInterface;\r\n    $.fn['pane'].noConflict = function () {\r\n        return Pane._jQueryInterface\r\n    };\r\n\r\n    return function (config) {\r\n        return new PaneManager(config)\r\n    }\r\n})($);\r\n\r\nexport default PaneManager\r\n"],"names":["PaneManager","$","TypeError","GetIEVersion","sAgent","window","navigator","userAgent","Idx","indexOf","parseInt","substring","match","Default","debug","container","loader","transitionInTime","transitionOutTime","ajax","Event","SHOW","SHOWN","HIDE","HIDDEN","RELOAD","LOADING","LOADED","LOADING_ERROR","PRINTED","SUBMIT","CLICK_DISMISS","CLICK_DATA_API","SUBMIT_DATA_API","Selector","WRAPPER","LOADER","PANE","PANE_NOT_STATIC","FORM","DATA_TOGGLE","DATA_DISMISS","config","_config","_getConfig","_wrapper","_events","console","toggleClass","length","key","Pane","manager","document","off","on","event","preventDefault","stopPropagation","_pane","relatedTarget","pane","href","data","attr","target","error","parents","open","load","append","paneManager","_manager","_jqXHR","_isTransitioning","_isStatic","_relatedTarget","_href","_loadOptions","wrapper","prepend","element","eventShow","trigger","isDefaultPrevented","refresh","setTimeout","addClass","fragments","eventReload","url","loadOptions","toString","_ajax","eventClose","removeClass","remove","toggle","$loader","close","$form","val","undefined","submitButton","isPlainObject","novalidate","get","checkValidity","bodyHttpRequest","inArray","toLowerCase","formData","_serializeForm","name","value","formDataTmp","forEach","push","method","processData","contentType","dataType","removeData","form","FormData","formParams","serializeArray","each","find","i","tag","files","file","options","success","textStatus","jqXHR","eventLoaded","paneAjax","first","html","responseText","errorThrown","eventLoadingError","_element","isStatic","URL","location","action","arg1","arg2","Error","fn","_jQueryInterface","noConflict"],"mappings":"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"}